<html>
<body>
@{
    ViewData["Title"] = "Crime Statistics";
}
<section class="apply-now" id="apply">
    <div class="container" style ="background:white">

       
              <div class="item">

        <div class="col" >
            <h3 style="border: 2px solid black; color: white; background-color: #181818; border-radius: 10px; text-align: center">Trends of overall crime for: <span>@ViewBag.cityName</span>, <span>@ViewBag.stateAbbrev.</span></h3>
            <div style="text-align: center;">
                <canvas id="crimeTrendChart" width="50" height="37" ></canvas>
                <p style="font-style: italic; color:black">(This information combines both violent crime for the year with the property crime for that year)</p>
            </div>
                <div class="text-left">
                <h5 style="color:white"><span>@ViewBag.cityName</span>, <span>@ViewBag.stateAbbrev</span></h5>
                <h1>Crime Amount for: </h1>
                <br>
                <h3 style="color:black;"><span>@ViewBag.cityName</span>, <span>@ViewBag.stateAbbrev</span><span id="year"></span></h3>
                <br>
               <div hidden>
               <label for= "yearSelector">Select a year:  </label>
                <select name= "yearSelector" id="yearSelector" required>
                    <option value="" disabled>Select year</option>
                </select>
                </div>
               
                <table id="cityCrimeStats" class="table">
                    <thead class="table-dark">
                        <tr>
                            <th>Offense Type</th>
                            <th>Total Offenses</th>
                            <th>Convictions</th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
                <h1 id="cityCrimeNoCrimeheader"></h1>
                <ul id="cityCrimeStatsNoCrime">
                </ul>
            </div>
        </div>


 
        
                <div class="col-lg-6">
          <div class="accordions is-first-expanded">
            <article class="accordion">
                <div class="accordion-head">
                    <span>Understand the community</span>
                    <span class="icon">
                        <i class="icon fa fa-chevron-right"></i>
                    </span>
                </div>
                <div class="accordion-body">
                    <div class="content">
                        <p style="color:black">These statistics will give you a better understanding about what types of crimes are committed in this community. 
                            This type of information should be compared and contrasted with other searches you have made, in order to gauge the risk between both communities.</p><br><br>
                    </div>
                </div>
            </article>
            <article class="accordion">
                <div class="accordion-head">
                    <span>Types of Offenses</span>
                    <span class="icon">
                        <i class="icon fa fa-chevron-right"></i>
                    </span>
                </div>
                <div class="accordion-body">
                    <div class="content">
                        <p style="color:black">Offenses such as homicide, arson, and aggravated assault are generally easy to understand. However, we understand that there is possible confusion 
                            when it comes to property-crime or violent-crime, and burglary compared to robbery. Here are some definitions to keep in mind when viewing these statistics offense types.
                            <br><br>
                            Burglary: Entry into a home/business with the intent to commit a crime (such as theft).
                            <br><br>
                            Robbery: Forcing an individual to hand over personal property under violence or threat of violence (may fall under category of violent-crime).
                            <br><br>
                            Property-Crime: A blanket term used to describe all crimes involving personal property, such a burglary, or larceny.
                            <br><br>
                            Violent-Crime: A blanket term used to describle all crimes involving threats of violence or violence. Situations that fall under the definition violent crime are things such as robbery,
                            rape, homicide, human-trafficking, and assault.<br><br></p>
                    </div>
                </div>
            </article>
            <article class="accordion">
                <div class="accordion-head">
                    <span>State Definition Differencesy</span>
                    <span class="icon">
                        <i class="icon fa fa-chevron-right"></i>
                    </span>
                </div>
                <div class="accordion-body">
                    <div class="content">
                        <p style="color:black">Be sure to look up exact definitons for crimes in your areas to be able to get a full understanding of the community beyond the amount of crimes that occur. 
                            Definitions will vary from state to state, so be sure to look up your states definition of things such as larceny, or assaul<br><br>
                    </div>
                </div>
            </article>
           
        </div>
        </div>

    </div>

</div>



      

    <div class="footer">
      <p>2021 Slice of Pi, Ltd. All Rights Reserved. 
    </div>
  </section>



<input hidden id="cityName" value="@ViewBag.cityName" type="text">
<input hidden id="stateAbbrev" value="@ViewBag.stateAbbrev" type="text">

@section Scripts
{
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.js"></script>
<script type="text/javascript" src="~/js/crime.js" asp-append-version="true"></script>
<script type="text/javascript" src="~/js/trendgraph.js" asp-append-version="true"></script>

<script>
    $('select').on('change', function (e) {
    var optionValue = $("option:selected", this);
    var selectedValue = this.value;
    
    $.ajax({
        type: "GET",
        dataType: "json",
        url: "/apiv3/FBI/UpdateCityStats",
        data: {cityName:$("#cityName").val(),stateAbbrev:$("#stateAbbrev").val(),year:selectedValue},
        success: function(data){
            showCityStats(data);
        },
        error: function(){
            console.log("Updater Issue.")
        }
    });
});
</script>

}


  <!-- Bootstrap core JavaScript -->
    <script src="~/lib/vendor/jquery/jquery.min.js"></script>
    <script src="~/lib/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <script src="~/assets/js/isotope.min.js"></script>
    <script src="~/assets/js/owl-carousel.js"></script>
    <script src="~/assets/js/lightbox.js"></script>
    <script src="~/assets/js/tabs.js"></script>
    <script src="~/assets/js/video.js"></script>
    <script src="~/assets/js/slick-slider.js"></script>
    <script src="~/assets/js/custom.js"></script>
    <script type="text/javascript" src="~/js/site.js" asp-append-version="true"></script>
    <script>
        //according to loftblog tut
        $('.nav li:first').addClass('active');
        var showSection = function showSection(section, isAnimate) {
          var
          direction = section.replace(/#/, ''),
          reqSection = $('.section').filter('[data-section="' + direction + '"]'),
          reqSectionPos = reqSection.offset().top - 0;
          if (isAnimate) {
            $('body, html').animate({
              scrollTop: reqSectionPos },
            800);
          } else {
            $('body, html').scrollTop(reqSectionPos);
          }
        };
        var checkSection = function checkSection() {
          $('.section').each(function () {
            var
            $this = $(this),
            topEdge = $this.offset().top - 80,
            bottomEdge = topEdge + $this.height(),
            wScroll = $(window).scrollTop();
            if (topEdge < wScroll && bottomEdge > wScroll) {
              var
              currentId = $this.data('section'),
              reqLink = $('a').filter('[href*=\\#' + currentId + ']');
              reqLink.closest('li').addClass('active').
              siblings().removeClass('active');
            }
          });
        };
        $('.main-menu, .responsive-menu, .scroll-to-section').on('click', 'a', function (e) {
          e.preventDefault();
          showSection($(this).attr('href'), true);
        });
        $(window).scroll(function () {
          checkSection();
        });
    </script>
</body>

</html>